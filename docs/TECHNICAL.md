# Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙÙ†ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¢Ú©Ø§Ø¯Ù…ÛŒ ÙÙ†ÛŒØ§Ø±

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡

### Ø³Ø§Ø®ØªØ§Ø± Ú©Ù„ÛŒ
Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ **Next.js 15** Ø¨Ø§ **App Router** Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª Ùˆ Ø§Ø² Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø²ÛŒØ± Ù¾ÛŒØ±ÙˆÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Side (Browser)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  React Components â”‚ State Management â”‚ UI/UX               â”‚
â”‚  - Pages          â”‚ - useState       â”‚ - Tailwind CSS      â”‚
â”‚  - Components     â”‚ - useEffect      â”‚ - shadcn/ui         â”‚
â”‚  - Hooks          â”‚ - Context        â”‚ - Framer Motion     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Next.js App Router                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Routes â”‚ Middleware â”‚ Server Components               â”‚
â”‚  - Auth     â”‚ - CORS     â”‚ - Data Fetching                 â”‚
â”‚  - CRUD     â”‚ - Security â”‚ - Server Actions                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Data Layer                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Prisma ORM â”‚ SQLite DB â”‚ Socket.IO â”‚ File System          â”‚
â”‚  - Schema    â”‚ - Queries â”‚ - Real-timeâ”‚ - Static Assets     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Ø¬Ø²Ø¦ÛŒØ§Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

### Û±. Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª (Authentication)

#### Ø¬Ø±ÛŒØ§Ù† Ø«Ø¨Øª Ù†Ø§Ù…:
```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant A as API Auth
    participant D as Database

    U->>F: Ù¾Ø± Ú©Ø±Ø¯Ù† ÙØ±Ù… Ø«Ø¨Øª Ù†Ø§Ù…
    F->>A: POST /api/auth/register
    A->>D: Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±
    D-->>A: Ù†ØªÛŒØ¬Ù‡ Ø¨Ø±Ø±Ø³ÛŒ
    A->>D: Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯
    D-->>A: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± + ID
    A-->>F: User + Token
    F->>F: Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
    F->>U: Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
```

#### Ø¬Ø±ÛŒØ§Ù† ÙˆØ±ÙˆØ¯ Ø¨Ø§ OTP:
```mermaid
sequenceDiagram
    participant U as User
    participant F as Frontend
    participant A as API Auth
    participant D as Database

    U->>F: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†
    F->>A: POST /api/auth/send-otp
    A->>A: ØªÙˆÙ„ÛŒØ¯ Ú©Ø¯ Û¶ Ø±Ù‚Ù…ÛŒ
    A-->>F: Ú©Ø¯ ØªØ³Øª + Ù…ÙˆÙÙ‚ÛŒØª
    U->>F: ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ú©Ø¯ OTP
    F->>A: POST /api/auth/verify-otp
    A->>D: Ø¬Ø³ØªØ¬ÙˆÛŒ/Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±
    D-->>A: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±
    A-->>F: User + Token
    F->>F: Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
    F->>U: Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
```

### Û². Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§Ù„Øª (State Management)

#### Ø³Ø§Ø®ØªØ§Ø± Ø­Ø§Ù„Øª Ø¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª:
```typescript
// Local State Ø¯Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§
const [user, setUser] = useState<User | null>(null)
const [courses, setCourses] = useState<Course[]>([])
const [loading, setLoading] = useState(false)

// Persistent State Ø¯Ø± localStorage
const userData = localStorage.getItem('user')
const token = localStorage.getItem('token')
```

### Û³. Ù„Ø§ÛŒÙ‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³

#### Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Prisma:
```prisma
model User {
  id        String   @id @default(cuid())
  phone     String   @unique
  name      String?
  email     String?
  avatar    String?
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  enrollments Enrollment[]
}

model Course {
  id          String   @id @default(cuid())
  title       String
  description String
  content     String
  imageUrl    String?
  price       Float
  duration    Int
  level       Level
  categoryId  String
  teacherId   String
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  category    Category @relation(fields: [categoryId], references: [id])
  teacher     Teacher  @relation(fields: [teacherId], references: [id])
  enrollments Enrollment[]
}

model Enrollment {
  id         String      @id @default(cuid())
  userId     String
  courseId   String
  status     EnrollmentStatus @default(ACTIVE)
  progress   Float       @default(0)
  enrolledAt DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  user       User        @relation(fields: [userId], references: [id])
  course     Course      @relation(fields: [courseId], references: [id])
  
  @@unique([userId, courseId])
}
```

### Û´. API Routes

#### Ø³Ø§Ø®ØªØ§Ø± API:
```typescript
// /api/auth/register/route.ts
export async function POST(request: NextRequest) {
  try {
    const { phone, name, email } = await request.json()
    
    // Validation
    if (!phone || !name) {
      return NextResponse.json({ error: '...' }, { status: 400 })
    }
    
    // Business Logic
    const existingUser = await db.user.findUnique({ where: { phone } })
    if (existingUser) {
      return NextResponse.json({ error: '...' }, { status: 400 })
    }
    
    const user = await db.user.create({ data: { phone, name, email } })
    
    // Response
    return NextResponse.json({
      user: { id: user.id, phone: user.phone, name: user.name },
      token: 'registered-user-token-' + user.id
    })
  } catch (error) {
    return NextResponse.json({ error: '...' }, { status: 500 })
  }
}
```

### Ûµ. Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ

#### Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øªâ€ŒÙ‡Ø§:
```typescript
// Header Component
interface HeaderProps {
  user?: User | null
}

export function Header({ user }: HeaderProps) {
  const [isMenuOpen, setIsMenuOpen] = useState(false)
  
  return (
    <nav className="bg-white shadow-sm sticky top-0 z-50">
      {/* Desktop Navigation */}
      <div className="hidden md:block">
        <div className="flex items-center justify-center space-x-8">
          <NavigationItem icon={Home} label="Ø®Ø§Ù†Ù‡" href="#home" />
          <NavigationItem icon={BookOpen} label="Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§" href="#courses" />
          {/* ... */}
        </div>
      </div>
      
      {/* Mobile Navigation */}
      <div className="md:hidden">
        <HamburgerMenu isOpen={isMenuOpen} onToggle={setIsMenuOpen} />
      </div>
    </nav>
  )
}
```

### Û¶. Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ù…â€ŒÙ‡Ø§

#### Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ ÙØ±Ù…â€ŒÙ‡Ø§:
```typescript
// Login Form Validation
const validatePhone = (phone: string): boolean => {
  const phoneRegex = /^09[0-9]{9}$/
  return phoneRegex.test(phone)
}

const validateOTP = (otp: string): boolean => {
  const otpRegex = /^[0-9]{6}$/
  return otpRegex.test(otp)
}

// Form Submission
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault()
  
  if (!validatePhone(phone)) {
    setError('Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª')
    return
  }
  
  setLoading(true)
  try {
    const response = await fetch('/api/auth/send-otp', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phone })
    })
    
    const data = await response.json()
    if (response.ok) {
      setShowOTP(true)
      setSuccess(`Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯: ${data.otp}`)
    }
  } catch (error) {
    setError('Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ø³Ø±ÙˆØ±')
  } finally {
    setLoading(false)
  }
}
```

### Û·. Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆØ³ÛŒØªÛŒ

#### Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆØ³ÛŒØªÛŒ:
```css
/* Mobile First Approach */
.container {
  @apply max-w-7xl mx-auto px-4;
}

/* Mobile (default) */
.grid {
  @apply grid-cols-1 gap-4;
}

/* Tablet */
@media (min-width: 768px) {
  .grid {
    @apply grid-cols-2 gap-6;
  }
}

/* Desktop */
@media (min-width: 1024px) {
  .grid {
    @apply grid-cols-3 gap-8;
  }
}
```

### Û¸. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯

#### ØªÚ©Ù†ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ:
```typescript
// 1. Lazy Loading Components
const Dashboard = dynamic(() => import('./dashboard'), {
  loading: () => <div>Loading...</div>
})

// 2. Image Optimization
<Image
  src={course.imageUrl}
  alt={course.title}
  width={400}
  height={300}
  className="rounded-lg"
  priority={index < 3}
/>

// 3. Data Fetching with Caching
const fetchCourses = async () => {
  const response = await fetch('/api/courses', {
    next: { revalidate: 3600 } // 1 hour cache
  })
  return response.json()
}

// 4. Memoization
const CourseCard = memo(({ course }: { course: Course }) => {
  return (
    <Card>
      {/* Card content */}
    </Card>
  )
})
```

### Û¹. Ø§Ù…Ù†ÛŒØª

#### ØªØ¯Ø§Ø¨ÛŒØ± Ø§Ù…Ù†ÛŒØªÛŒ:
```typescript
// 1. Input Sanitization
const sanitizeInput = (input: string): string => {
  return input.trim().replace(/[<>]/g, '')
}

// 2. Token Validation
const validateToken = (token: string): boolean => {
  try {
    const decoded = Buffer.from(token, 'base64').toString()
    const [userId, timestamp] = decoded.split(':')
    
    // Check if token is not expired (24 hours)
    const isExpired = Date.now() - parseInt(timestamp) > 24 * 60 * 60 * 1000
    return !isExpired
  } catch {
    return false
  }
}

// 3. Rate Limiting (Ù…ÙÙ‡ÙˆÙ…ÛŒ)
const rateLimiter = new Map<string, number>()

const checkRateLimit = (ip: string): boolean => {
  const requests = rateLimiter.get(ip) || 0
  if (requests > 100) return false
  
  rateLimiter.set(ip, requests + 1)
  setTimeout(() => rateLimiter.delete(ip), 60000) // 1 minute
  return true
}
```

### Û±Û°. Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§

#### Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§:
```typescript
// Error Boundary Component
class ErrorBoundary extends Component {
  constructor(props) {
    super(props)
    this.state = { hasError: false }
  }

  static getDerivedStateFromError(error) {
    return { hasError: true }
  }

  componentDidCatch(error, errorInfo) {
    console.error('Error caught by boundary:', error, errorInfo)
  }

  render() {
    if (this.state.hasError) {
      return <ErrorFallback />
    }
    return this.props.children
  }
}

// Global Error Handler
const handleGlobalError = (error: Error) => {
  console.error('Global error:', error)
  // Send to error tracking service
}
```

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§

### Û±. Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ø±Ø¨Ø±:
```
Login/Register â†’ Token Generation â†’ Local Storage â†’ Dashboard â†’ API Calls
```

### Û². Ø¬Ø±ÛŒØ§Ù† Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§:
```
API Request â†’ Database Query â†’ Response â†’ Component State â†’ UI Render
```

### Û³. Ø¬Ø±ÛŒØ§Ù† Ø«Ø¨Øª Ù†Ø§Ù…:
```
Course Selection â†’ API Request â†’ Database Insert â†’ Success Message â†’ UI Update
```

## ğŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ùˆ Ø¯ÛŒØ¨Ø§Ú¯

### Û±. Console Logging:
```typescript
// Development Logging
if (process.env.NODE_ENV === 'development') {
  console.log('Debug info:', data)
}

// Error Logging
console.error('API Error:', error)
```

### Û². Performance Monitoring:
```typescript
// Component Render Time
const startTime = performance.now()
// ... component logic
const endTime = performance.now()
console.log(`Component render took ${endTime - startTime} milliseconds`)
```

## ğŸš€ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ùˆ ØªÙˆÙ„ÛŒØ¯

### Û±. Environment Variables:
```bash
# .env.local
DATABASE_URL="file:./db/custom.db"
NEXTAUTH_SECRET="your-secret-key"
NEXTAUTH_URL="http://localhost:3000"
```

### Û². Build Process:
```bash
# Development
npm run dev

# Production Build
npm run build
npm run start
```

### Û³. Docker Configuration:
```dockerfile
FROM node:18-alpine AS base
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

FROM base AS builder
COPY . .
RUN npm run build

FROM base AS runner
COPY --from=builder /app/.next ./.next
COPY --from=builder /app/public ./public
EXPOSE 3000
CMD ["npm", "start"]
```

---

**ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡: Ø§Ù…ÛŒÙ† ÙˆÙ†Ø¯ÛŒ**  
**Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: Û²Û°Û²Û´**